<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${airportEmployee.id == null || airportEmployee.id == ''} ? 'Add Airport Employee' : 'Edit Airport Employee'">
        Airport Employee
    </title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg,#0f172a,#1e293b);
            min-height: 100vh;
            color: #e5e7eb;
        }
        .page-wrapper { padding-top: 4rem; padding-bottom: 4rem; }
        .form-card {
            background: #020617;
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,0.3);
            box-shadow: 0 24px 60px rgba(15,23,42,0.8);
        }
        /* Custom Input Styling */
        input, select {
            background: #1e293b !important;
            color: #e5e7eb !important;
            border: 1px solid rgba(148, 163, 184, 0.4);
        }
        input:focus, select:focus {
            background: #1e293b !important;
            color: #fff !important;
            border-color: #60a5fa;
            box-shadow: 0 0 0 0.2rem rgba(37, 99, 235, 0.35);
        }
        /* Error Styling */
        .is-invalid {
            border-color: #ef4444 !important;
        }
        .invalid-feedback {
            color: #ef4444;
            display: block; /* Ensure it shows up */
        }
        label { font-weight: 500; }
        .btn-primary { border-radius: 999px; }
    </style>
</head>
<body>

<div class="container page-wrapper">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card form-card p-4">
                <h3 class="text-light mb-3"
                    th:text="${airportEmployee.id == null || airportEmployee.id == ''} ? 'Register New Airport Employee' : 'Edit Airport Employee'">
                    Register New Airport Employee
                </h3>

                <form th:object="${airportEmployee}"
                      th:action="${airportEmployee.id == null || airportEmployee.id == ''} ?
                                 @{/airport-employees} :
                                 @{/airport-employees/{id}(id=${airportEmployee.id})}"
                      method="post">

                    <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger">
                        <p class="mb-0" th:each="err : ${#fields.globalErrors()}" th:text="${err}"></p>
                    </div>

                    <div class="mb-3">
                        <label for="id">ID</label>
                        <input type="text"
                               id="id"
                               class="form-control"
                               th:field="*{id}"
                               th:classappend="${#fields.hasErrors('id')} ? 'is-invalid' : ''"
                               th:readonly="${airportEmployee.id != null && airportEmployee.id != ''}"
                               placeholder="e.g. APT-001"/>

                        <div class="invalid-feedback" th:if="${#fields.hasErrors('id')}" th:errors="*{id}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="name">Name</label>
                        <input type="text"
                               id="name"
                               class="form-control"
                               th:field="*{name}"
                               th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''"
                               placeholder="e.g. Jane Doe"/>

                        <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="designation">Designation</label>
                        <select id="designation"
                                class="form-select"
                                th:field="*{designation}"
                                th:classappend="${#fields.hasErrors('designation')} ? 'is-invalid' : ''">
                            <option value="" disabled>-- Select Designation --</option>
                            <option th:each="d : ${designations}"
                                    th:value="${d}"
                                    th:text="${d}">
                            </option>
                        </select>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('designation')}" th:errors="*{designation}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="department">Department</label>
                        <select id="department"
                                class="form-select"
                                th:field="*{department}"
                                th:classappend="${#fields.hasErrors('department')} ? 'is-invalid' : ''">
                            <option value="" disabled>-- Select Department --</option>
                            <option th:each="dep : ${departments}"
                                    th:value="${dep}"
                                    th:text="${dep}">
                            </option>
                        </select>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('department')}" th:errors="*{department}"></div>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="/airport-employees" class="btn btn-outline-light">Cancel</a>
                        <button type="submit" class="btn btn-primary">
                            <span th:text="${airportEmployee.id == null || airportEmployee.id == ''} ? 'Save Employee' : 'Update Changes'">Save Employee</span>
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>